 JFIF        	 !) %"1"%)+/..383-7(-.+



- &------+02-/-+--------.------+-------------/-------   "                 O 
     !1A"Qaq 2Br#3CDRb%S$5cs4Tdt              4       !1AQBaq2"3CR#   ? h ( ( *>R
M"
4Vt\պCv.uf=ՍjkA֕
ڇD& d{w|-KlMʹq	4b1&?i?<2lmdZҐ.˕~y~oE\̾y)OcQ¿A5Yse yo&7<#N~
¥7?bVm~Qfx uBr'
Mzn
aGhR_@f/Zv^qmďCܻu;VD6k_"\W8𕇸|G
1|7١l=
ۘ}sۉ^˕W=\v$Ɠc.]M1$M;
ʕ,7AJax'XGC:H>fbIǭhһф?_ham1ሏLX#Z:,g|B ^XŭzX	?m.<Ox=l|k>#Hx|ٯ:Zk
g/~
&3VloNmb9׆DZӒ?cqx
;spq{>|F!*9@˝C./e6ZIB7Z*xaI~l3X>(IwW
(Q@Q@6|[i4NIo]#k4Qp:K\BaKLRٍͪk|ʞU?oa,Aȸ{Aar.݃EJ*Q,mXdYWMs(ӍG9hP|@4ݤDĭTb-a+#iC9ČPHVcAsnۃE7̚)lYgda" eF`w	LϚ5Y2y#b xF5tARd!d}[Czn^_R 1mv#=Ƽy)Ձe+2Gg:pߕҌUo(&ta7kΣqMjU<! m$ۛ<x?)Ξ,CGHrF/Q;<% ^_ߩ[myG/4XK E<W}&U;{P}n)Os{zg]]أt
7,Ɨ	H~௙= 5, q¶aiQpVG{>F-  EZ-g8!hΟʂ(XQE QE ST~{:/~0$R:9ж42c;KWZ_H{4o?'8vdޒ^ـ<1\}9n@|%Oa|LXfB-H"¥#ެ|OҦ5n@X7
ʖ<di%V*E 
("=hIwxh%q'*ZomjU<Tq
/|E
Q[R_q>.Cʎߔ;68-ђ/ݬe6_kIi^\4Rk纪l}zIRI M#q^=7mX1Kmx
r4]уwCs
:H؈&-10IE46I$L9^p˴jZ2I*{f`m/~>Ҹ;Xx^ϭŻywbCZܽ<r&OǪ3uV\E\eQΝiJZˌTU{E h }B63mISn6;*ssIES,Uފ 2
>%EguK7PQE
(
(
~C}
_>oZGי_+^eƹASywV9G(|ol;Hs7Q)$mJ&*vE\g
J\U\X {ʙb$9՝
B[0Zf_:672=:ʾ8sc.q ϼ'h l)V77M%ݼZa8i:@r^ن[.@ҋ6kG8}6
98j	.b"*6 :R&&˛+ek|(وo.,G;h&Q E:Ҿ0z
" b%,Ue4.h|%+SN82+{VWzu.Ԯa/ǈk_[5h, x^yүd -쑕$0  
--v_vo@I"֝ǽጇݨ--v}%7$C6\
.ԑU؉F+9uJ_uA,z	! dRp4'|j7E~eĲnYN&RƭXl/k3p9wUgQE
(
(
 1_AWޑ?XGZR^ez<CZެ;;!OIp',="l$ \ )G8<TE3iS R}1mp1^S!TQN9iBlMildp
ְkYIHkqRos_c`6gd`.o=&#zL)kU;)lku5
-Y
HQpa=C;
KyqiCgŤfi`T:\S/MhO4
ЀG;
5Yduc\c^%GNeCf.?KwhL@IU'(M(cX^wpO$ LҴo3=)lbE[^vo3)E+H`66쬯	g(%KK~cH+Ed]zqIŕE$kOٻ= 
+*Аϥ
yH>,L\.V	s-9Fr+?ms8.
~1&nյƦTpqP9]2s/F̃}Iů|I<Ç) hȒF־foLZE
è@T߾} y<_L GҲ .2YK1cŉ'nxW
9NӠQ\ECG</-Flb|8)OXx}u).U_ʢzXO -vdx}FktAEP0( ( ",OO𣯠+X1֔cIy-E<A\aEfʥ3pʥ-s5쳘q@* llW6$ZrV(hQY٘UW]X
c
"CwQW]
Ƅ9Qgqf RlNi'L.F^]Rڞ5¤ڰ_)e%!09֣hJZ᭝Z׺kη+
sݯ|ڎ77,q=H͈dV0b
`<mp06_*yWfhݢ3]SUu7$~o)J	b6>i="ؘ#'(l\H9{>4 JN
ŗ(uֻ}

+ZK.a{ ewlcl<3<PauM
ڿyu#a+ UӐ']!B7rK%bjC'1΢N=XيěǰXNp	 I@eXY:8kNm<3l%m*Øeū7ߗ
3
jM;;'4WZ;{[Gv=!
IsFvÍq<GAXaz|mS3
V\vakS	C^:FjBmhQE
(
(
}%<G_E[`#1֔8;GZ+zR/"
Jޱ ˴p`9ZW.<i\֤]"12MA:du$

[Qǂcndʤ)|h~(
>
[#/U̍ܞs(:dIOQ
Z .
!+Ur`n-K
5FVLռy  eie?8+hkFVER8/+;Wk((q;QjRZcQ^n֒9 窶N'[XvڕOkB[@Sl4P_}&va^g1-C4J)'[* JW1Q@Q@Q@a2O%,DtSjvL:gktT]Y`U@W,@U STӶfU*E*_FxQ<Ozs'UOa>ö:Z!o$ftknV;FC;Hjmq1Fup_Ib(Hʈ\-ZH+rv'miW
4Ɵ`	М<9;{f5@'(>[^88t)7euy>X4hl,M8;9W)Ӧ
MkFΊðG~
g:=aª5.eW )/+#*^"iH*uCr
qKj\k1iJېU~{D,_S)k"P
 P,Ç
@Gq
;Zҡzمc˺[_2 ,ʬ5k}f9jEdS;^6;r}4
1x"F|<Dmx_Fau*W.VjRcE÷7r.sY^

gdk.nb-{SJk#],lW]:m1xirM)P)[q-t,[׻
bUh(X'a: C[M7^XL;>Q{E} QE QE TNq}X8SiU5Jn}BM+xkxw
. j%n'`9CbѮQ{馽e z2G@>5 ~->F4:hWo6ښ7)e%mrK."tj"]@
.) WVvr5[ZU* !6< <&	34T3bu?e;BZRYj, }xp-FhBX\ۿZ]Åtg9EGnb2Q%\-]ؓs툗)UP-c`8nN_Deu
cs~:iJ_1xrKC`Fe7Ѝ{*2UǍFK) b0݇Od"r;X -уk8Uw	p1^V(F$4Hdg{4'6_դnHNT]Aci+tbJ[N
Q KoR276uyRA쨅٥}Y}8lШ"4rM6TX=݌<YXĢE\  0^b'6E6eln,^&Va5aXʱ\iۖIQ#Ek	%ǈy%Vه`?Z
Oʇ9tbDO'C·o#˧̚}#Erp:U{EPPwkHW<h-u@~soZT
189T.Rnٜ1׹,y F&ƙ{݋|}x4U	q
_8Ra8FrN$yQzj`&WPlQ"@IQc6S#ȧX}G)t[kǉTcw׸h  fT_!"!<eco#qQG@bwG'XX۱+B[)S( 
 ԛu:gI1 [I{j|5imEk
9߲[,c'386/ZňAkeX:߃וǶge@ı&9+n*E6
HŔFڱ1xM6)ă@Ž*s;
b,|);iCذԷaayU6TnS4=G
*AlyQ` (E1fu[bj.@Gۛ6ucp{9p>{`Myj9F
Q7$j!pNKSESY
J0GƼE_7K[0AF0x00a{N}Kf~Ba!S-
AGS8:j8
߇
w3Hna#O$xYU,u
@#zEQ3t9&QAf5}EWv.F뎒`5$4m MzVAP{gmeA"_==Şo!JG@yۙܸi}[^<\/<Mu+D;Iwf7bOxi4
߁=Ti-M`$
ߪV<}mNe\`0WO1K&17-uESY$-,Fo3E{>3"Ec#w\
>ǝY.}9*WtʄA=t*
3@@XS4,y_-O
G-@m8eb-u2F̪F#NLXiaoư+q˷*66w),
5mNBcHzR.I  \)9o{u1mK'e- KiItIr .~SYE kƢv\#2bO[^q;d+X"G͹<|qi(6_!Wk0C!Af@NFo
A<yZV\
c[w<3
$ZM#a)"J2fkf ;	?xq'e#B,P^5l{y9IGQO"Kx6<1җ<5< 59( spw5oMP
M` ϶ף|HD#nr]+TFqI,	PÀ

ZݹXIzTPGau.Fɉv$hIV
%JF6S%1X?;sr']9k2JbkKT pGٷa8h!Ic۬mmEQ>
\)X
n\fkŜݘd{tw)jAof3b"犟R[tXع~PEtF;K 98__`^0S5}<aO!Sd;fG
ʉ{|oH>%stbÅ>®/XS
e3p5deM),2ָ:.]{݅lB41ޮc?n(S9?Pww&~'CWu׶
v--:H8f#L >G¹#
|5,
86/Jr/hFU
_(9Q}.9X>'DHm.>綣O`I,A{=OA\QҨ R0Ȃ;NEӟꁗ	 *M6}O
T$R$[!WW62/ ,;9cVCbH\pJ,BfG u?*`3ޙ,eI6{TIg 'Twi3('VVH't۸dsi ]84LRKzy}lVdL'ƤF9!Ĥ22ChO 
s 
6Xe
Òu'1
_L36epO ͚
F+zEy@ 
eckwlÇ)Yؐ4 jܥZm,$d=S@31%@F=̦ٸK!E
 A}IWEѶ]YI$a8p<[kau

DQZ( ( ( ( (  aXy=hTkR4P
1O^M3q<BY
Rh~}'nr+Ę	G0xKױ׎uJaZ5rу2o~<<7k>U11
MygwE` 
x^uF"6܆i$j-˱!V4~51ۑ}!P-ѵI#PI[hF"6#K
R*<,`An循S9N3IMJ4fP0)a×
-M~ %zl
eɨEԖq"~
U[y7qbI!}a~6j*JbU|؝{AeY
TU `o!8c>vUѪ+=+P
(
(
(
(
(
(
(
(
(
(

PPB  buvUQ~
H")8QE0Obsw(>NQ@ `4 p((
(?


--------------------------------------------------------------------------------------------------------------
addtocart1 back end
---------------------------------------------------------------------------------------------------------------
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;
using System.Configuration; 

public partial class AddToCart1 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
         if (!IsPostBack)
        {
            if (Session["buyitems"] == null)
            {
                Button1.Enabled = false;
            }
            else
            {
                Button1.Enabled = true;
            }


            //Adding product to Gridview
            Session["addproduct"] = "false";
            DataTable dt = new DataTable();
            DataRow dr;
            dt.Columns.Add("sno");
            dt.Columns.Add("pid");
            dt.Columns.Add("pname");
            dt.Columns.Add("pimage");
            dt.Columns.Add("pprice");
            dt.Columns.Add("pquantity");
            dt.Columns.Add("ptotalprice");

            if (Request.QueryString["id"] != null)
            {
                if (Session["Buyitems"] == null)
                {
                    dr = dt.NewRow();
                    SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["bca"].ConnectionString);

                    SqlDataAdapter da = new SqlDataAdapter("select * from product Where ProductId=" + Request.QueryString["id"], conn);
                    DataSet ds = new DataSet();
                    da.Fill(ds);

                    dr["sno"] = 1; 
                    dr["pid"] = ds.Tables[0].Rows[0]["Productid"].ToString();
                    dr["pname"] = ds.Tables[0].Rows[0]["Pname"].ToString();
                    dr["pimage"] = ds.Tables[0].Rows[0]["Pimage"].ToString();
                    dr["pprice"] = ds.Tables[0].Rows[0]["Pprice"].ToString();
                    dr["pquantity"] = Request.QueryString["quantity"];

                    int price = Convert.ToInt32(ds.Tables[0].Rows[0]["pprice"].ToString());
                    int Quantity = Convert.ToInt16(Request.QueryString["quantity"].ToString());
                    int TotalPrice = price * Quantity;
                    dr["ptotalprice"] = TotalPrice;

                    dt.Rows.Add(dr);
                    GridView1.DataSource = dt;
                    GridView1.DataBind();
                    Session["buyitems"] = dt;
                    Button1.Enabled = true;

                    GridView1.FooterRow.Cells[5].Text = " Total Amount";
                    GridView1.FooterRow.Cells[6].Text = grandtotal().ToString();
                    Response.Redirect("AddToCart.aspx");
                }
                else
                {
                    dt=(DataTable)Session["buyitems"];
                    int sr;
                    sr = dt.Rows.Count;

                    dr = dt.NewRow();
                    SqlConnection scon = new SqlConnection(ConfigurationManager.ConnectionStrings["bca"].ConnectionString);
                    
                    SqlDataAdapter da= new SqlDataAdapter("select * from Product Where ProductID=" + Request.QueryString["id"],scon);
                    DataSet ds = new DataSet();
                    da.Fill(ds);

                    dr["sno"]=sr + 1;
                    dr["pid"] =ds. Tables[0].Rows[0]["ProductID"].ToString();
                    dr["pname"]= ds. Tables[0].Rows[0]["Pname"].ToString();
                    dr["pimage"]= ds. Tables[0].Rows[0]["Pimage"].ToString();
                    dr["pprice"]= ds. Tables[0].Rows[0]["Pprice"].ToString();
                    dr["pquantity"] = Request.QueryString["quantity"];
                
                    
                    int price = Convert.ToInt32(ds. Tables[0].Rows[0]["pprice"].ToString());
                    int Quantity = Convert.ToInt16(Request.QueryString["quantity"].ToString());
                    int TotalPrice = price* Quantity;
                    dr["ptotalprice"]= TotalPrice;
                  
                    
                    dt.Rows.Add(dr);
                    GridView1.DataSource = dt;
                    GridView1.DataBind();
                    Session["buyitems"] = dt;
                    Button1.Enabled = true;

                    GridView1. FooterRow.Cells[5].Text= "Total Amount";
                    GridView1.FooterRow.Cells[6].Text=grandtotal().ToString();
                    Response.Redirect("Addtocart.aspx");
                   }
                }
                else    
                {
                   dt=(DataTable)Session["buyitems"];
                   GridView1.DataSource = dt;
                   GridView1.DataBind();

                  if (GridView1.Rows.Count > 0)
                  {
                    GridView1. FooterRow.Cells[5].Text = "Total Amount";
                    GridView1. FooterRow.Cells[6].Text = grandtotal().ToString();
                  }
               }
           }
           string OrderDate = DateTime.Now.ToShortDateString();   
           Session["Orderdate"]= OrderDate;
           orderid();
    }

    // 2.Calculate Final Price

    public int grandtotal()
    {
        DataTable dt = new DataTable();
        dt = (DataTable)Session["buyitems"];
        int nrow = dt.Rows.Count;
        int i = 0;
        int totalprice = 0;
        while (i < nrow)
        {
            totalprice = totalprice + Convert.ToInt32(dt.Rows[i]["pprice"].ToString());

            i = i + 1;
        }
        return totalprice;
    }

    public void orderid()
    {
        String alhpa = "abCdefghIjklmNopqrStuvwXyz123456789";
        Random r = new Random();
        char[] myArray = new char[5];
        for (int i = 0; i < 5; i++)
        {
            myArray[i] = alhpa[(int)(35 * r.NextDouble())];
        }
        String orderid;
        orderid = "Order_Id: " + DateTime.Now.Hour.ToString() + DateTime.Now.Second.ToString() + DateTime.Now.Day.ToString()
            + DateTime.Now.Month.ToString() + DateTime.Now.Year.ToString() + new string(myArray) + DateTime.Now.Minute.ToString() + DateTime.Now.Second.ToString();
        Session["Orderid"] = orderid;
    }



    protected void GridView1_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {
        GridView1.DataBind();
    }

   
    protected void Button1_Click(object sender, EventArgs e)
    {
        DataTable dt;
        dt = (DataTable)Session["buyitems"];
        for (int i = 0; i <= dt.Rows.Count - 1; i++)
        {
            SqlConnection scon = new SqlConnection(ConfigurationManager.ConnectionStrings["bca"].ConnectionString);
            scon.Open();
            SqlCommand cmd = new SqlCommand("insert into OrderDetails (orderid, sno, productid, productname, price, quantity, orderdate) values (" + Session["Orderid"] +
             dt.Rows[i]["sno"] + "," + dt.Rows[i]["pid"] + "," + dt.Rows[i]["pname"] + "," + dt.Rows[i]["pprice"] + "," + dt.Rows[i]["pquantity"] + ",(" + Session["Orderid"]);

            cmd.ExecuteNonQuery();
            scon.Close();
        }
        //If Session is Null Redirecting to login else Placing the order
       if (Session["username"] == null)
        {
            Response.Redirect("Login.aspx");
        }
        else
        {
            if (GridView1.Rows.Count.ToString() == "0")
            {
                Response.Write("<script>alert( 'Your Cart is Empty. You cannot place an Order');</script>"); 
            }
            else
            {
                Response.Redirect("PlaceOrder.aspx");
            }
        }
    }

}

